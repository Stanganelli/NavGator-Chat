<!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
    <style>
        #chat {
            width: 300px;
            height: 400px;
            border: 1px solid #000;
            padding: 10px;
            overflow-y: scroll;
        }
    </style>
</head>
<body>
    <div id="chat"></div>
    <span type="text" id="nomeDiv" placeholder="Seu nome"></span>
    <input type="text" id="mensagem" placeholder="Digite uma mensagem">
    <button onclick="post()">Enviar</button>

    <script>
        nome = ""
        load()
    
        function load() {
            var nome = sessionStorage.getItem("nome")
            nomeDiv.innerHTML = `${nome}`
        }
    
        function post() {
            var mensagem = document.getElementById("mensagem").value;
            var nome = sessionStorage.getItem("nome");
    

            //c√≥digo demoniaco abaixo
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/", true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = xhr.responseText;
                    document.getElementById("mensagem").value = "";
                    document.getElementById("chat").innerHTML += `<p><strong>${nome}:</strong> ${mensagem}</p>`;
                }
            };
    
            var data = `user_name=${nome}&mensagem=${mensagem}`;
            xhr.send(data);
        }
    </script>
</body>
</html>